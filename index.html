<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Puzzle</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <style>
        body { text-align: center; background-color: #111; color: white; }
        canvas { display: block; margin: auto; }
        #inputBox { display: none; margin-top: 10px; }
        #heartCanvas { display: none; margin: auto; width: 200px; height: 200px; background-color: transparent; }
    </style>
</head>
<body>
    <h1> SurpriseüéÇ </h1>
    <div id="scene-container"></div>
    <p id="equation">(20 - 5) * 2 + 1995 = ?</p>
    <input type="text" id="answer" placeholder="ÿ¨Ÿàÿßÿ® ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ">
    <button onclick="checkAnswer()">ÿ®ÿ±ÿ±ÿ≥€å</button>
    <audio id="birthdaySong" src="15.mp3"></audio>
    <canvas id="heartCanvas"></canvas>
    <h2 id="loveText" style="display:none;">I Love You ‚ù§Ô∏è</h2>

    <script>
        let scene = new THREE.Scene();
        let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        let renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth * 0.8, window.innerHeight * 0.6);
        document.getElementById("scene-container").appendChild(renderer.domElement);

        let geometry = new THREE.BoxGeometry();
        let material = new THREE.MeshBasicMaterial({ color: 0x44aa88, transparent: true, opacity: 0.5, wireframe: true });
        let cube = new THREE.Mesh(geometry, material);
        scene.add(cube);
        camera.position.z = 2;

        function animate() {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
        }
        animate();

        function checkAnswer() {
            let answer = document.getElementById("answer").value;
            if (answer == "2005") {
                document.getElementById("birthdaySong").play();
                alert("ÿ™ÿ®ÿ±€å⁄©! üéâ ÿ¢ŸáŸÜ⁄Ø ÿØÿ± ÿ≠ÿßŸÑ ŸæÿÆÿ¥ ÿßÿ≥ÿ™!");
                setTimeout(showHeart, 31000); // ÿ®ÿπÿØ ÿßÿ≤ 26 ÿ´ÿßŸÜ€åŸá ŸÇŸÑÿ® ÿ±ÿß ŸÜŸÖÿß€åÿ¥ ÿØŸáÿØ
            } else {
                alert("ÿ¨Ÿàÿßÿ® ŸÜÿßÿØÿ±ÿ≥ÿ™ ÿßÿ≥ÿ™. ÿØŸàÿ®ÿßÿ±Ÿá ÿßŸÖÿ™ÿ≠ÿßŸÜ ⁄©ŸÜ!");
            }
        }

        function showHeart() {
            document.getElementById("scene-container").style.display = "none";
            document.getElementById("equation").style.display = "none";
            document.getElementById("answer").style.display = "none";
            document.querySelector("button").style.display = "none";
            document.getElementById("heartCanvas").style.display = "block";
            drawHeart();
        }

        function drawHeart() {
            let canvas = document.getElementById("heartCanvas");
            let ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = "red";
            ctx.lineWidth = 2;
            
            let scale = 4; // ÿßŸÅÿ≤ÿß€åÿ¥ ŸÖŸÇ€åÿßÿ≥ ÿ®ÿ±ÿß€å ÿ®ÿ≤ÿ±⁄Øÿ™ÿ± ÿ¥ÿØŸÜ ŸÇŸÑÿ®
            let offsetX = canvas.width / 2;
            let offsetY = canvas.height / 2 + 10;
            let t = -Math.PI;

            function drawStep() {
                if (t > Math.PI) {
                    document.getElementById("loveText").style.display = "block";
                    return;
                }
                let x = 23 * Math.pow(Math.sin(t), 3);
                let y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
                if (t === -Math.PI) ctx.moveTo(offsetX + x * scale, offsetY - y * scale);
                else ctx.lineTo(offsetX + x * scale, offsetY - y * scale);
                ctx.stroke();
                t += 0.05;
                requestAnimationFrame(drawStep);
            }
            ctx.beginPath();
            drawStep();
        }
        document.getElementById("answer").addEventListener("keypress", function(event) {
    if (event.key === "Enter") { 
        event.preventDefault(); // ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿßÿ±ÿ≥ÿßŸÑ ŸÅÿ±ŸÖ Ÿæ€åÿ¥‚ÄåŸÅÿ±ÿ∂
        checkAnswer(); // ÿßÿ¨ÿ±ÿß€å ÿ™ÿßÿ®ÿπ ÿ®ÿ±ÿ±ÿ≥€å ÿ¨Ÿàÿßÿ®
    }
});
    </script>
</body>
</html>
